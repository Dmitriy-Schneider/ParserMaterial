# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ø–æ–ª—è Standard –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## –ü—Ä–æ–±–ª–µ–º–∞

AI Search (Perplexity) –∏–Ω–æ–≥–¥–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–ª–µ `standard`:

### –ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫:
- **Bohler-Uddeholm** ‚Üí –ø–∏—à–µ—Ç "–°–®–ê" –∏–ª–∏ "–®–≤–µ—Ü–∏—è" –≤–º–µ—Å—Ç–æ "–ê–≤—Å—Ç—Ä–∏—è"
- **–ü—É—Ç–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π** ‚Üí –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –º–∞—Ä–∫–∏ —ç—Ç–æ –°–®–ê (AISI), –∞ –Ω–µ Bohler-Uddeholm
- **–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–∞—Ç–∞** ‚Üí "GOST", "GOST, –†–æ—Å—Å–∏—è", "GOST Russia"

---

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Å–ø–æ—Å–æ–±—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚≠ê –°–ø–æ—Å–æ–± 1: DBeaver (GUI) - **–†–ï–ö–û–ú–ï–ù–î–£–Æ –î–õ–Ø –ù–ê–ß–ê–õ–ê**

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π SQL —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π
- ‚úÖ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
- ‚úÖ –û—Ç–∫–∞—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (ROLLBACK)
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã, –ø–æ–∏—Å–∫, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV/Excel

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**
1. –°–∫–∞—á–∞—Ç—å: https://dbeaver.io/download/
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
3. Database ‚Üí New Database Connection ‚Üí SQLite
4. –ü—É—Ç—å –∫ –ë–î: `c:\Users\dmitr\OneDrive\Desktop\AL\ParserSteel\database\steel_grades.db`

**–ö–∞–∫ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å:**
1. –û—Ç–∫—Ä—ã—Ç—å —Ç–∞–±–ª–∏—Ü—É `steel_grades`
2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –≤ —Å—Ç–æ–ª–±—Ü–µ `standard`: `%Bohler%`
3. –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –∑–∞–ø–∏—Å–∏
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SQL —Å–∫—Ä–∏pty (—Å–º. –Ω–∏–∂–µ) –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é
5. Commit –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ü—Ä–∏–º–µ—Ä—ã SQL –≤ DBeaver:**
```sql
-- 1. –ù–∞–π—Ç–∏ –≤—Å–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ Bohler-Uddeholm
SELECT id, grade, standard
FROM steel_grades
WHERE standard LIKE '%Bohler%'
ORDER BY standard;

-- 2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å Bohler-Uddeholm –Ω–∞ Austria
UPDATE steel_grades
SET standard = 'Bohler-Uddeholm, Austria'
WHERE standard LIKE '%Bohler-Uddeholm%';

-- 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
SELECT DISTINCT standard
FROM steel_grades
WHERE standard LIKE '%Bohler%';
```

---

### üöÄ –°–ø–æ—Å–æ–± 2: SQL —Å–∫—Ä–∏–ø—Ç—ã - **–°–ê–ú–´–ô –ë–´–°–¢–†–´–ô –î–õ–Ø –ú–ê–°–°–û–í–´–• –ü–†–ê–í–û–ö**

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `fix_standards.sql`:

```sql
-- Bohler-Uddeholm - Austria
UPDATE steel_grades
SET standard = 'Bohler-Uddeholm, Austria'
WHERE standard LIKE '%Bohler-Uddeholm%'
  OR standard LIKE '%B√∂hler-Uddeholm%';

-- AISI - USA
UPDATE steel_grades
SET standard = 'AISI, USA'
WHERE standard = 'AISI'
   OR standard LIKE 'AISI, US%';

-- GOST - Russia
UPDATE steel_grades
SET standard = 'GOST, Russia'
WHERE standard = 'GOST'
   OR standard LIKE 'GOST,%–†–æ—Å—Å%';

-- DIN - Germany
UPDATE steel_grades
SET standard = 'DIN, Germany'
WHERE standard = 'DIN';

-- JIS - Japan
UPDATE steel_grades
SET standard = 'JIS, Japan'
WHERE standard = 'JIS';

-- BS-EN - UK
UPDATE steel_grades
SET standard = 'BS-EN, UK'
WHERE standard LIKE 'BS-EN%';

-- GB/T - China
UPDATE steel_grades
SET standard = 'GB/T, China'
WHERE standard LIKE 'GB/T%';

-- Carpenter - USA
UPDATE steel_grades
SET standard = 'Carpenter, USA'
WHERE standard LIKE '%Carpenter%';

-- Sandvik - Sweden
UPDATE steel_grades
SET standard = 'Sandvik, Sweden'
WHERE standard LIKE '%Sandvik%';

-- Uddeholm - Sweden
UPDATE steel_grades
SET standard = 'Uddeholm, Sweden'
WHERE standard LIKE '%Uddeholm%'
  AND standard NOT LIKE '%Bohler%';

-- Commit –∏–∑–º–µ–Ω–µ–Ω–∏–π
COMMIT;
```

**–í—ã–ø–æ–ª–Ω–∏—Ç—å –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:**
```bash
# –ï—Å–ª–∏ –ë–î –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec -it parser-steel-app sqlite3 /app/database/steel_grades.db < fix_standards.sql

# –ï—Å–ª–∏ –ë–î –ª–æ–∫–∞–ª—å–Ω–æ
sqlite3 database/steel_grades.db < fix_standards.sql
```

---

### üîß –°–ø–æ—Å–æ–± 3: Python —Å–∫—Ä–∏–ø—Ç - **–î–õ–Ø –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ô –ù–û–†–ú–ê–õ–ò–ó–ê–¶–ò–ò**

–°–æ–∑–¥–∞–π—Ç–µ `normalize_standards.py`:

```python
import sqlite3
import re

# –ü—Ä–∞–≤–∏–ª–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏: —Å—Ç–∞–Ω–¥–∞—Ä—Ç/–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å ‚Üí —Å—Ç—Ä–∞–Ω–∞
NORMALIZATION_RULES = {
    # –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã
    'GOST': 'Russia',
    'AISI': 'USA',
    'ASTM': 'USA',
    'SAE': 'USA',
    'DIN': 'Germany',
    'EN': 'Europe',
    'BS-EN': 'UK',
    'JIS': 'Japan',
    'GB/T': 'China',

    # –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏
    'Bohler-Uddeholm': 'Austria',
    'B√∂hler-Uddeholm': 'Austria',
    'Bohler': 'Austria',
    'Uddeholm': 'Sweden',
    'Carpenter': 'USA',
    'Sandvik': 'Sweden',
    'Thyssen': 'Germany',
    'Hitachi': 'Japan',
    'Daido': 'Japan',
}

def normalize_standard(standard: str) -> str:
    """–ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª–µ standard —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–∞–≤–∏–ª–∞–º"""
    if not standard or standard == 'null':
        return standard

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥–æ–µ –ø—Ä–∞–≤–∏–ª–æ
    for key, country in NORMALIZATION_RULES.items():
        if key.lower() in standard.lower():
            # –ï—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å —Å—Ç—Ä–∞–Ω–∞, –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º
            if ',' in standard:
                return standard
            # –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–∞–Ω—É
            return f"{key}, {country}"

    return standard

def main():
    conn = sqlite3.connect('database/steel_grades.db')
    cursor = conn.cursor()

    # –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏
    cursor.execute("SELECT id, standard FROM steel_grades")
    records = cursor.fetchall()

    updates = []
    for record_id, standard in records:
        if standard:
            normalized = normalize_standard(standard)
            if normalized != standard:
                updates.append((normalized, record_id))
                print(f"ID {record_id}: '{standard}' ‚Üí '{normalized}'")

    # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
    if updates:
        print(f"\n–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ {len(updates)} –∑–∞–ø–∏—Å–µ–π...")
        cursor.executemany("UPDATE steel_grades SET standard = ? WHERE id = ?", updates)
        conn.commit()
        print("‚úÖ –ì–æ—Ç–æ–≤–æ!")
    else:
        print("–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è")

    conn.close()

if __name__ == '__main__':
    main()
```

**–ó–∞–ø—É—Å—Ç–∏—Ç—å:**
```bash
python normalize_standards.py
```

---

### ‚ùå –°–ø–æ—Å–æ–± 4: SQLite CLI - **–ù–ï –†–ï–ö–û–ú–ï–ù–î–£–Æ**

–°–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω–æ –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –ø—Ä–∞–≤–æ–∫, –Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ç–æ—á–µ—á–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

```bash
docker exec -it parser-steel-app sqlite3 /app/database/steel_grades.db
```

```sql
UPDATE steel_grades SET standard = 'Bohler-Uddeholm, Austria' WHERE grade = 'K340';
.quit
```

---

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

### –®–∞–≥ 1: –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã (DBeaver)
```sql
-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è standard
SELECT DISTINCT standard, COUNT(*) as count
FROM steel_grades
GROUP BY standard
ORDER BY count DESC;

-- –ù–∞–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –∑–∞–ø–∏—Å–∏
SELECT id, grade, standard
FROM steel_grades
WHERE standard LIKE '%Bohler%'
   OR standard LIKE '%–°–®–ê%'
   OR standard LIKE '%–®–≤–µ—Ü–∏—è%'
ORDER BY standard;
```

### –®–∞–≥ 2: –ú–∞—Å—Å–æ–≤–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (SQL —Å–∫—Ä–∏–ø—Ç)
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π `fix_standards.sql` (—Å–º. –≤—ã—à–µ)

### –®–∞–≥ 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –±—É–¥—É—â–∏—Ö AI —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
–î–æ–±–∞–≤—å—Ç–µ `normalize_standards.py` –≤ workflow:
- –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ AI Search
- –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–¥ `ai_search.py` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é

---

## –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

| –ü—Ä–æ–±–ª–µ–º–∞ | SQL –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
|----------|-----------------|
| Bohler-Uddeholm ‚Üí –°–®–ê | `UPDATE steel_grades SET standard = 'Bohler-Uddeholm, Austria' WHERE standard LIKE '%Bohler%' AND standard LIKE '%–°–®–ê%';` |
| AISI –±–µ–∑ —Å—Ç—Ä–∞–Ω—ã | `UPDATE steel_grades SET standard = 'AISI, USA' WHERE standard = 'AISI';` |
| GOST –±–µ–∑ —Å—Ç—Ä–∞–Ω—ã | `UPDATE steel_grades SET standard = 'GOST, Russia' WHERE standard = 'GOST';` |
| –†–∞–∑–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (–∑–∞–ø—è—Ç–∞—è/–ø—Ä–æ–±–µ–ª) | `UPDATE steel_grades SET standard = REPLACE(standard, ' Russia', ', Russia');` |

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```sql
-- 1. –í—Å–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
SELECT DISTINCT standard
FROM steel_grades
ORDER BY standard;

-- 2. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º
SELECT
    CASE
        WHEN standard LIKE '%Russia%' THEN 'Russia'
        WHEN standard LIKE '%USA%' THEN 'USA'
        WHEN standard LIKE '%Austria%' THEN 'Austria'
        WHEN standard LIKE '%Germany%' THEN 'Germany'
        WHEN standard LIKE '%Japan%' THEN 'Japan'
        ELSE 'Other'
    END as country,
    COUNT(*) as count
FROM steel_grades
GROUP BY country
ORDER BY count DESC;
```

---

## –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

**–í–ê–ñ–ù–û:** –ü–µ—Ä–µ–¥ –º–∞—Å—Å–æ–≤—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ —Å–¥–µ–ª–∞–π—Ç–µ backup:

```bash
# Windows
copy database\steel_grades.db database\steel_grades.db.backup

# Linux/Docker
docker exec parser-steel-app cp /app/database/steel_grades.db /app/database/steel_grades.db.backup
```

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:**
```bash
copy database\steel_grades.db.backup database\steel_grades.db
```

---

## –í—ã–≤–æ–¥

**–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥:**
1. **DBeaver** - –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–±–ª–µ–º
2. **SQL —Å–∫—Ä–∏–ø—Ç—ã** - –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –º–∞—Å—Å–æ–≤—ã—Ö UPDATE
3. **Python —Å–∫—Ä–∏–ø—Ç** - –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –±—É–¥—É—â–∏—Ö AI —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–¥ Claude Code:**
- ‚ùå **Claude Code** = —Ä–∞—Å—Ö–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ –∫–∞–∂–¥—É—é –ø—Ä–∞–≤–∫—É
- ‚úÖ **SQL/Python** = –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ = –≤—Å—è –±–∞–∑–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
- ‚úÖ **–ë—ã—Å—Ç—Ä–µ–µ:** SQL –æ–±–Ω–æ–≤–ª—è–µ—Ç 10,000 –∑–∞–ø–∏—Å–µ–π –∑–∞ 1 —Å–µ–∫—É–Ω–¥—É

**–í—Ä–µ–º—è –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–π –±–∞–∑—ã:**
- DBeaver + SQL: ~10-15 –º–∏–Ω—É—Ç
- Python —Å–∫—Ä–∏–ø—Ç: ~1-2 –º–∏–Ω—É—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- Claude Code: –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ + —Ç–æ–∫–µ–Ω—ã

–•–æ—Ç–∏—Ç–µ —á—Ç–æ–±—ã —è –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª –ø–æ–ª–Ω—ã–π `fix_standards.sql` —Å–æ –≤—Å–µ–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –¥–ª—è –≤–∞—à–µ–π –±–∞–∑—ã?
