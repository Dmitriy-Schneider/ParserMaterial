var RNDLYUT="Rendering Layout",RTV_DATA="Retrieving Data",PWAIT="Please Wait...",sts=null,MASK_MULTI="*",guiTmD=50;var InfMsg={inD:$("infoDiv"),inTx:$("infoTxt"),dlg:null,hi:function(){this.dlg.hide()},si:function(b,a){if(!this.dlg){this.dlg=new zDlg(true,true);this.dlg.setCntObj(this.inD);this.inD.style.visibility="inherit"}var c=this.dlg;c.setTitle(b);this.inTx.innerHTML=a;posCenter(c.container);c.show()}};InfMsg.si(RTV_DATA,PWAIT);function createDiv(d,c,a){var b=ce("div",d);b.className=c;if(arguments.length>2){a.appendChild(b)}return b}function crtSMDiv(c,b){b=(typeof b==="undefined"?"tipDataSrc":b);var a=ce("div",c);a.className=b;a.innerHTML="Retreiving Data, please wait...";$("pdDiv").appendChild(a);return a}function DynMnu(){}DynMnu.prototype.onHover=function(d){var c=zkEvent.getTgt(d);DynMnu.actMnu=c.id;var b=$("sm_"+c.id);if(DynMnu.ra[c.id]!==1||!b){DynMnu.rqMnu=c.id;if(!b){b=crtSMDiv("sm_"+c.id,"subMenu")}ajaxGetReq("/knives/steels/php/stlajax.php?mnu="+c.id.substring(3),DynMnu.prototype.ajaxReady)}zkEvent.add(b,"mouseout",DynMnu.prototype.onMouseOut,false);posByAnc(b,c);b.style.visibility="visible"};DynMnu.prototype.onMouseOut=function(a){if(DynMnu.actMnu!==null){var b=$("sm_"+DynMnu.actMnu);if((testMouseLeave(a,$(DynMnu.actMnu)))&&testMouseLeave(a,b)){zkEvent.remove(b,"mouseout",DynMnu.onMouseOut,false);b.style.visibility="hidden";DynMnu.actMnu=null}}};DynMnu.prototype.ajaxReady=function(h){if(DynMnu.rqMnu!==null&&h&&h.status){var m=h.status,g=$("sm_"+DynMnu.rqMnu);if(m===200){clrNd(g);var l=cdf(),f=createDiv(g.id+"1","smCell",l),e=JSON.parse(h.responseText),c=0,k=25,b=1,j;for(var a in e){if(e.hasOwnProperty(a)){j=ce("a");j.href="/knives/steels/"+a;j.innerHTML=e[a];f.appendChild(j);c++;if(c>=k){f=createDiv(g.id+b,"smCell",l);c=0;b++}}}g.appendChild(l);DynMnu.ra[DynMnu.rqMnu]=1}else{g.innerHTML="Unable to access data, please try again."}DynMnu.rqMnu=null}};DynMnu.rqMnu=null;DynMnu.actMnu=null;DynMnu.ra={mnuhlp:1};function DynMnuMk(){}DynMnuMk.prototype=new DynMnu();DynMnuMk.chrng=null;DynMnuMk.chrngMnu=null;DynMnuMk.curChrng=-1;DynMnuMk.prototype.onHover=function(g){var f=zkEvent.getTgt(g);var b=$("sm_"+f.id);if(DynMnuMk.curChrng===-1||!b){ajaxGetReq("/knives/steels/php/stlajax.php?mnu="+f.id.substring(3),DynMnuMk.prototype.ajaxReady);if(!b){b=crtSMDiv("sm_"+f.id,"subMenu")}DynMnu.rqMnu=f.id}else{var c=DynMnuMk.chrngMnu;c[0].style.display="";DynMnuMk.curChrng=0;for(var d=1;d<c.length;d++){c[d].style.display="none"}}zkEvent.add(b,"mouseout",DynMnu.prototype.onMouseOut,false);posByAnc(b,f);DynMnu.actMnu=f.id;b.style.visibility="visible"};DynMnuMk.prototype.onChrngHover=function(b){if(DynMnuMk.chrng!==null&&DynMnuMk.chrngMnu!==null){var a=zkEvent.getTgt(b);var c=DynMnuMk.chrng.indexOf(a);if(c!==DynMnuMk.curChrng){DynMnuMk.chrngMnu[DynMnuMk.curChrng].style.display="none";DynMnuMk.curChrng=c;DynMnuMk.chrngMnu[DynMnuMk.curChrng].style.display=""}}};DynMnuMk.prototype.ajaxReady=function(a){if(DynMnu.rqMnu!==null){var w=15,q;try{q=a.status}catch(s){return}var m=$("sm_"+DynMnu.rqMnu);if(q===200){clrNd(m);var b=cdf(),k=createDiv("chrMenu","charmenu",b),h=JSON.parse(a.responseText),v=1,f=0,o=0,n=null,p=null;DynMnuMk.chrng=[];DynMnuMk.chrngMnu=[];do{o=Math.min(f+3*w-1,h.length-1);if(o!==h.length-1){while(h[o+1][1][0]===h[o][1][0]){o--}}var t=createDiv(m.id+"chr"+v,"chrange",k);zkEvent.add(t,"mouseover",DynMnuMk.prototype.onChrngHover,false);t.innerHTML=h[f][1][0]+"-"+h[o][1][0];DynMnuMk.chrng[v-1]=t;n=createDiv(m.id+"sec"+v,"smCellCont",b);DynMnuMk.chrngMnu[v-1]=n;n.style.display="none";t=createDiv(m.id+"1","smCell",n);var l=w,u=0,r,g,j;for(r=f;r<=o;r++){if(p===null||p!==h[r][1][0]){g=createDiv(null,"chrTtl",t);p=h[r][1][0];g.innerHTML=p}j=ce("a");j.href="/knives/steels/"+h[r][0];j.innerHTML=h[r][1];t.appendChild(j);u++;if(u>l-1&&u<(o-f)){l+=w;t=createDiv(m.id+l/w,"smCell",n)}}t.style.border="none";v++;f=o+1}while(f<h.length);m.appendChild(b);DynMnuMk.chrngMnu[0].style.display="";DynMnuMk.curChrng=0}else{m.innerHTML="Unable to access data, please try again."}DynMnu.rqMnu=null}};var dmnu=new DynMnu(),dmnumk=new DynMnuMk();zkTltip.tipProps={srcType:"qryParam",ctSrc:"ajax",qryParam:"nn",sticky:false,bShowCB:true,posFn:zkTltip.posAtSrc,objPreProc:zkTltip.ppStdStk};zkTltip.req=null;zkTltip.qryParam=function(a,c){var b=zkTltip.getTipCls(c.className);return b.substring(3)};zkAjaxReqFn=function(b,a){zkTltip.req=createAjaxReq();zkTltip.req.onreadystatechange=function(){if(zkTltip.req&&zkTltip.req.readyState===4){zkTltip.responseReady(zkTltip.req,a)}};zkTltip.req.open("GET","/knives/steels/php/stlajax.php?"+b,true);zkTltip.req.send(null);return true};zkTltip.responseReady=function(c,b){if(c){var a;if(c.status===200){a=JSON.parse(c.responseText)}else{a={ttl:"Error!",msg:"No data available!"}}zkTltip.respRecd=true;zkTltip.genTipBody(a.msg,a.ttl,"stl"+b,true);zkTltip.req=null}};zkTltip.zkOnHide=function(){if(zkTltip.req){zkTltip.req.onreadystatechange=function(){};zkTltip.req.abort();zkTltip.resetReqFlags()}};var TMgr={tbl:null,si:null,MAXROWPG:20,contCells:null,contBtmCells:null,cmDiv:null,cmBtn:null,scroller:null,scrollbar:null,lmgr:null,evhWndResize:null,init:function(){TMgr.cmDiv=$("cmgrDiv");TMgr.cmBtn=$("cpanel");TMgr.tbl=$("steelData");if(TMgr.tbl){var b=geBT("div",$("hdrDivTop")),a=b.length;TMgr.contCells=new Array(a);a--;do{TMgr.contCells[a]=b[a]}while(a--);TMgr.evhWndResize=(function(c){return function(d){return c.onResize(d)}})(TMgr);zkEvent.add($("hdrDivTop"),"click",TMgr.hdrClick,true);zkEvent.add($("hdrDivBottom"),"click",TMgr.hdrClick,true);zkEvent.add(TMgr.cmDiv,"click",TMgr.colClick,true);zkEvent.add(window,"resize",TMgr.evhWndResize,true)}},colClick:function(a){var b=zkEvent.getTgt(a);if(b&&b.type==="checkbox"){InfMsg.si(RNDLYUT,PWAIT);setTimeout(function(){TMgr.tck(b.value)},guiTmD);return}},onResize:function(c){var b=document.getElementById("stlTBlScContainer"),a=document.getElementById("stlScbContainer");a.style.left=b.offsetLeft+b.offsetWidth+1+"px"},tck:function(a){TMgr.tglCl(a);InfMsg.hi()},ftc:function(b,c){var a=c.length-1;do{if(c[a].className===b){return a}}while(a--);return -1},setColLayout:function(){if(TMgr.tbl){var m=TMgr,h=m.lmgr.hc,c,n=[],g,b,e,a,l,f,d=0,k=h.length;for(e=0;e<k;e++){b=h[e];g=getCSS(3,"."+b,false);if(g){g.style.display="none";c=m.ftc(b,m.contCells);if(c>=0){n.push(c)}}}a=m.tbl.rows;l=a.length-1;k=n.length-1;if(k>=0){do{f=a[l].cells;d=k;do{f[n[d]].style.display="none"}while(d--)}while(l--)}}},adjHdrs:function(){var e=TMgr.tbl.rows[0].cells,d=0,j=TMgr.contCells,a=TMgr.contBtmCells,f=j.length,c,g,k,h,b;for(g=0;g<f;g++){k=j[g];h=a?a[g]:null;if(k.className.search("stC")===0){c=e[g];if(c!==null){b=c.offsetWidth;k.style.width=b+"px";d+=b;if(h){h.style.width=b+"px"}}}}return d},adjStats:function(b){var a=$("qStats");if(a!==null){a.style.width=b.style.width}a=$("genStats");if(a!==null){a.style.width=b.style.width}},adjustCont:function(){var i=$("hdrDivTop"),a=$("hdrDivBottom"),b=$("steelTblCont"),h=$("stlTBlScContainer"),f=TMgr,d=null,c,g,e;f.contBtmCells=a?geBT("div",a):null;c=f.adjHdrs();h.style.height=b.offsetHeight-2*i.offsetHeight-2+"px";h.style.top=i.offsetTop+i.offsetHeight+1+"px";console.log("Container offset top: %d; Container offsetHeight: %d; Table top: %s",i.offsetTop,i.offsetHeight,h.style.top);if(f.tbl.offsetHeight<=h.offsetHeight){f.tbl.style.width=c+"px";h.style.height=f.tbl.offsetHeight+"px";b.style.height=f.tbl.offsetHeight+2*i.offsetHeight+1+"px";b.style.width=c+"px";h.style.width=c+"px"}else{g=f.tbl.offsetWidth;if(c<g){c=g}if(c>g){f.tbl.style.width=c+"px"}d=$("stlScbContainer");h.style.width=c+"px";b.style.width=c+d.offsetWidth+"px";e=Math.min(400,f.tbl.offsetHeight+2*i.offsetHeight+2);b.style.height=e+"px";h.style.height=e-2*i.offsetHeight-2+"px";d.style.top=h.offsetTop+"px";d.style.left=h.offsetLeft+h.offsetWidth+1+"px";d.style.height=h.offsetHeight+"px"}if(f.scrollbar===null&&d!==null){f.scroller=new jsScrlObj(h,h.offsetWidth,h.offsetHeight);f.scrollbar=new jsScrlBar(d,f.scroller,true,null)}else{if(f.scrollbar!==null){f.scroller.reset();f.scrollbar.reset()}}if(a){a.style.position="absolute";a.style.top=h.offsetTop+h.offsetHeight+1+"px";if(d){c+=d.offsetWidth}a.style.width=c+"px"}f.adjStats(b);f.lmgr.adjSrch();return b},shrn:function(){var a=getCSS(3,".stlGrpNm",false);if(a){if(a.style.display==="none"){a.style.display="";zkTltip.tipProps.qryParam="nn"}else{a.style.display="none";zkTltip.tipProps.qryParam="in=1&"+zkTltip.tipProps.qryParam}}},hdrClick:function(c){var b=zkEvent.getTgt(c),a;if(b.dataset){a=b.dataset.hdridx}else{a=TMgr.ftc(b.className,TMgr.contCells)}if(a&&a>0){sts.wk(c,a)}},cmgr:function(){var g=TMgr,a,b,e,d,f,j,c,h;if(!g.cmgrDlg){e=new zDlgAlrt(zDlgAlrt.Warning);e.setTitle("Manage Columns");d=$("cmgrDiv");d.style.visibility="inherit";e.setCntObj(d);g.cmgrDlg=e}a=geBT("input",g.cmDiv);c=a.length;for(b=0;b<c;b++){j=a[b];f=getCSS(3,"."+g.contCells[j.value].className,false);if(f.style.display==="none"){j.checked=false}else{j.checked=true}}posCenter(g.cmgrDlg.container);g.cmgrDlg.show()},tglCl:function(h){var g=TMgr,j=g.tbl.style,e,c,a,f,b,d;if(h>=0&&h<g.contCells.length){e=getCSS(3,"."+g.contCells[h].className,false);if(e!==false){c=e.style;j.visibility="hidden";if(c.display==="none"){c.display=""}else{c.display="none"}a=g.tbl.rows;f=a.length;b=c.display;for(d=0;d<f;d++){a[d].cells[h].style.display=b}g.adjustCont();j.visibility="visible"}}},getErrDlg:function(){if(!TMgr.errdlg){TMgr.errdlg=new zDlgAlrt(zDlgAlrt.Error);TMgr.errdlg.setTitle("Error!")}return TMgr.errdlg},showErrMsg:function(b){var a=TMgr.getErrDlg();a.setContent(b);posCenter(a.container);a.show()},showConfMsg:function(b){var a=TMgr.getErrDlg();a.setContent(b);a.setTitle("Success");posCenter(a.container);a.show()}};var CmpC={checked:[],MAXCHECK:12,init:function(){if(TMgr.tbl){zkEvent.add($("iTblDiv"),"mousedown",CmpC.toggleChk,false)}},cmp:function(){var a="",e="";if(CmpC.checked===null||CmpC.checked.length===0){TMgr.showErrMsg("You must have at least one alloy selected to build a graph!");return}var b=CmpC.checked.length,d;for(d=0;d<b;d++){var c=CmpC.checked[d].value.split(",");a+=c[0]+",";e+=c[1]+","}a=a.substring(0,a.length-1);e=e.substring(0,e.length-1);document.location.href="/knives/steels/steelgraph.php?nm="+encodeURIComponent(a)+"&ni="+encodeURIComponent(e)},toggleChk:function(a){var b=zkEvent.getTgt(a);if(b){if(b.type==="checkbox"){if(!b.checked){CmpC.ac(b)}else{CmpC.rc(b)}}}},ac:function(b){if(CmpC.checked.length>=CmpC.MAXCHECK){b.cancelBubble=true;TMgr.showErrMsg("Can't compare more than "+CmpC.MAXCHECK+" alloys, please deselect first!");return}CmpC.checked.push(b);var a=b.parentNode.parentNode.rowIndex,c=TMgr.tbl.rows[a].style;c.backgroundColor="#444";c.color="#fff"},rc:function(c){for(var a=0;a<CmpC.checked.length;a++){if(c===CmpC.checked[a]){CmpC.checked.splice(a,1);var b=c.parentNode.parentNode.rowIndex,d=TMgr.tbl.rows[b].style;d.backgroundColor="";d.color="";return}}}};var SFt={elements:{c:"c",cr:"cr",co:"co",cu:"cu",mn:"mn",mo:"mo",n:"n",nb:"nb",ni:"ni",p:"p",s:"s",si:"si",w:"w",v:"v"},srchCtlsId:["snm","fmSnmInp","anm","std","nt","ct","tc","bs","nmo","ipn","mk","clrAll"],filter:null,srch:"snmInp",req:null,oth:0,ddx:null,lmgr:null,init:function(){var a=zkEvent;a.add($("stlSrch"),"click",SFt.simpsrc,false);a.add($("advSrch"),"click",SFt.show,false);a.add($("stgDiv"),"click",SFt.hnStgClk,true);a.add($("clrall"),"click",SFt.clearAll,true);a.add($("cpanel"),"click",SFt.hnTbClick,false);a.add($("mnustd"),"mouseover",dmnu.onHover,false);a.add($("mnustd"),"mouseout",dmnu.onMouseOut,false);a.add($("mnumk"),"mouseover",dmnumk.onHover,false);a.add($("mnumk"),"mouseout",dmnumk.onMouseOut,false);a.add($("mnucc"),"mouseover",dmnu.onHover,false);a.add($("mnucc"),"mouseout",dmnu.onMouseOut,false);a.add($("mnutec"),"mouseover",dmnu.onHover,false);a.add($("mnutec"),"mouseout",dmnu.onMouseOut,false);a.add($("mnuhlp"),"mouseover",dmnu.onHover,false);a.add($("mnuhlp"),"mouseout",dmnu.onMouseOut,false);a.add($("stdStg"),"change",SFt.stdChanged,false);a.add($("std"),"change",SFt.stdChanged,false);a.add($("filterElements"),"click",SFt.chkClick)},hnTbClick:function(a){var b=zkEvent.getTgt(a);switch(b.id){case"compareBtn":CmpC.cmp();break;case"stgBtn":SFt.showStg();break;case"chmBtn":SFt.elemHlp();break}},hnStgClk:function(a){var b=zkEvent.getTgt(a);switch(b.id){case"save":SFt.saveSettings();break;case"defStg":SFt.defStgs();break;case"colMgr":TMgr.cmgr();break}},elemHlp:function(){var c=SFt,b;if(!c.elLnk){b=ce("a");b.href="/knives/steels/steelelements.shtml";b.target="_blank";c.elLnk=b}window.open(c.elLnk.href)},stdChanged:function(d){var a=zkEvent.getTgt(d),c,b;if(a.id==="std"||a.id==="stdStg"){c=$("sort");b=(a.selectedIndex!==0)?a.options[a.selectedIndex].text:"Name";c.options[0].text=b}},updSort:function(c,b){$("sort").selectedIndex=c-1;$("desc").checked=b},hrnClick:function(){InfMsg.si(RNDLYUT,PWAIT);setTimeout(SFt.shRefs,guiTmD)},shRefs:function(){var a=TMgr;a.shrn();a.adjustCont();a.tbl.style.visibility="visible";InfMsg.hi()},show:function(){var a=SFt,e,c;if(!a.srchDlg){e=new zDlgConfirm(zDlgAlrt.Warning,a.sbmtSrch,null,"Search",null);e.setTitle("Advanced Search Options");c=$("stlfilter");c.style.visibility="inherit";e.setCntObj(c);a.srchDlg=e}posCenter(a.srchDlg.container);a.srchDlg.show();var b=$("fmSnmInp");b.focus();b.select()},chkBoxId4Elem:function(a){return"c"+SFt.elements[a]},pctIds4Elem:function(a){return([SFt.elements[a]+"min",SFt.elements[a]+"max"])},elemFromCbxId:function(a){return a.substr(1,a.length)},clearAll:function(){var e=SFt,g=e.srchCtlsId,d,f,b,c,a;for(b=0;b<g.length-1;b++){d=$(g[b]);if(d){d.value="";d.checked=false}}c=e.elements;for(a in c){if(c.hasOwnProperty(a)){f=e.chkBoxId4Elem(c[a]);d=$(f);if(d){d.checked=false}}}},chkClick:function(c){var d=zkEvent.getTgt(c);if(d){var b=SFt.elemFromCbxId(d.id);if(b&&b.length>0){var f=SFt.pctIds4Elem(b),a=$(f[0]);if(a){SFt.setEI(a,!d.checked)}a=$(f[1]);if(a){SFt.setEI(a,!d.checked)}}}},setEI:function(a,b){a.disabled=b;if(b){a.style.backgroundImage=null}},sbmtFm:function(d){InfMsg.si(RNDLYUT,PWAIT);var c=SFt,b;if(!d){d=$(c.srch)}b=document.forms.stlfilter;b.snm.value=c.tstInp(d);var a=b.nt.value;if(a!==null&&a.length>0){if(a.charAt(0)!==MASK_MULTI){a=MASK_MULTI+a}if(a.charAt(a.length-1)!==MASK_MULTI){a+=MASK_MULTI}}b.nt.value=a;b.posted.value=2;b.submit()},sbmtSrch:function(){SFt.sbmtFm($("fmSnmInp"))},simpsrc:function(){InfMsg.si(RNDLYUT,PWAIT);document.location.href="/knives/steels/steelchart.php?snm="+encodeURIComponent(SFt.tstInp($(SFt.srch)))},tstInp:function(b){var a=b.value;return a},showStg:function(){var a=SFt,b;a.ddx={sort:$("sort").selectedIndex,desc:$("desc").checked,std:$("stdStg").selectedIndex,hrn:$("hrn").checked};if(!a.stgDlg){a.stgDlg=new zDlgConfirm(zDlgAlrt.Warning,a.stgOnOk,null);a.stgDlg.setTitle("Chart Layout Settings");b=$("stgDiv");b.style.visibility="inherit";a.stgDlg.setCntObj(b)}posCenter(a.stgDlg.container);a.stgDlg.show()},stgOnOk:function(){var a=SFt,b=a.ddx,c;if(b.std!==$("stdStg").selectedIndex){InfMsg.si(RNDLYUT,PWAIT);document.location.href="/knives/steels/steelchart.php";return}if(b.hrn!==$("hrn").checked){a.hrnClick()}c=$("sort").selectedIndex;if(b.sort!==c||b.desc!==$("desc").checked){sts.wk(null,c+1)}a.ddx=null},saveSettings:function(){var c=$("stdStg"),f=c.options[c.selectedIndex].value,a=$("hdrDivTop"),g=geBT("div",a),e="",b,d;c=$("hrn");f+=":"+(c.checked?c.value:0);c=$("ipn");f+=":"+(c.checked?c.value:0);c=$("sort");f+=":"+c.options[c.selectedIndex].value;c=$("desc");f+=":"+(c.checked?c.value:0);for(d=0;d<g.length;d++){b=g[d];if(b.offsetWidth===0&&b.className.search("stC")===0){e+=b.className+","}}if(e.length>0){e=e.substring(0,e.length-1)}f+=":"+e;setCk("vo1",f,365,"/",null,null);TMgr.showConfMsg("Settings Saved In The Cookie.")},defStgs:function(){var b=$("stdStg"),a=$("sort");b.selectedIndex=0;a.selectedIndex=0;a.options[0].text=b.options[0].text;$("hrn").checked=false;$("ipn").checked=false;$("desc").checked=false;SFt.clearAll();delCk("vo1","/",null);SFt.ddx=null;SFt.sbmtFm()},loadStgs:function(){var a=getCk("vo1");if(a){va=a.split(":");if(va[va.length-1]!==null&&va[va.length-1].length>0){SFt.lmgr.hc=va[va.length-1].split(",");TMgr.setColLayout()}}}};var TINY={};TINY.sc=["name","maker","base","tech","country"];TINY.table=(function(){function e(f){this.dsc=false;this.n=f;this.p=-1;this.init("steelData");this.ctl=false;this.rs=false}e.prototype.init=function(h){var g=c(h);this.e=h;this.l=g.r.length;g.a=[];var f=this.l-1;do{g.a[f]={}}while(f--)};e.prototype.wk=function(f,g){if(f&&f.ctrlKey&&g>1){InfMsg.si(RNDLYUT,PWAIT);this.ctl=true}else{InfMsg.si("Sorting",PWAIT);this.ctl=false}this.evt=f;this.y=g;setTimeout(function(){sts.wk2()},guiTmD)};e.prototype.wk2=function(){var m=this.y,j,p,h,g,k,o,f;if(this.ctl&&m>1){TMgr.tglCl(m)}else{p=c(this.e);var l=this.l;for(j=0;j<l;j++){p.a[j].o=j;o=p.r[j].cells[m];p.r[j].style.display="";while(o.hasChildNodes()){o=o.firstChild}p.a[j].v=o.nodeValue?o.nodeValue:"";if(sts.p===-1){f=p.r[j];k=f.cells[0].firstChild;if(k!==null&&k.checked){k.checked=false}}}if(sts.p!==m&&sts.p!==-1){d(null,sts.p)}sts.dsc=$("desc").checked;if(this.evt&&sts.p===m){sts.dsc=!sts.dsc}d(sts.dsc?"sdesc":"sasc",m);sts.p=m;sts.nm=TMgr.contCells[m].className.slice(3);p.a.sort(b);h=ce("tbody");for(j=0;j<this.l;j++){g=p.r[p.a[j].o].cloneNode(true);h.appendChild(g)}if(sts.rs){CmpC.initCmpArr();sts.rs=false}p.replaceChild(h,p.b);SFt.updSort(m,sts.dsc)}InfMsg.hi()};function d(k,j){if(j>0){var h=TMgr,f=h.contCells[j],l=h.contBtmCells?h.contBtmCells[j]:null,g=geBT("img",f);if(g.length!==0){f.removeChild(g[0]);if(l){l.removeChild(geBT("img",l)[0])}}if(k){g=ce("img");g.src="http://images.zknives.com/titles/"+k+".png";g.width="5";g.height="8";f.insertBefore(g,f.firstChild);if(l){l.insertBefore(g.cloneNode(true),l.firstChild)}}}}function c(g){var f=$(g);f.b=geBT("tbody",f)[0];f.r=f.b.rows;return f}function b(m,o){var l=m.v.toLowerCase(),k=o.v.toLowerCase(),n=0;if(l===k){return 0}if(l.indexOf("?")!==-1){return 1}else{if(k.indexOf("?")!==-1){return -1}else{if(TINY.sc.indexOf(sts.nm)!==-1){n=l>k?1:(l<k?-1:0)}else{var j=a(l),i=a(k);n=j[0]>i[0]?1:(j[0]<i[0]?-1:0)}}}if(sts.dsc){n*=-1}return n}function a(g){var f=[null,null],h=g.indexOf("-");if(h!==-1){f[0]=parseFloat(g.slice(0,h));f[1]=parseFloat(g.slice(h+1))}else{f[0]=parseFloat(g)}return f}return{sorter:e}}());var LMgr={hc:null,setLayout:function(){var a=TMgr,d=SFt,e=LMgr,c,b=zkEvent;SFt.lmgr=TMgr.lmgr=LMgr;a.init();d.loadStgs();a.MAXROWPG=$("maxrec").value;e.adjCP();b.add(document,"keydown",e.kbHnd,true);b.add($("kbdshortslnk"),"click",e.showKbdHlp,false);CmpC.init();if(a.MAXROWPG>0){if($("hrn").checked){a.shrn()}c=a.adjustCont();sts=new TINY.table.sorter("sorter");sts.wk(null,$("sort").selectedIndex+1);c.style.visibility="visible"}else{InfMsg.hi()}d.init()},showKbdHlp:function(){var b=LMgr,c,a;if(!b.kbdHlp){c=new zDlgAlrt(zDlgAlrt.Info);c.setTitle("Keyboard Shortcuts");a=$("kbdshorts");a.style.display="block";c.setCntObj(a);b.kbdHlp=c}posCenter(b.kbdHlp.container);b.kbdHlp.show()},adjCP:function(){var b=$("cpanel"),a=$("mnuhlp");if(b&&a){b.style.width=a.offsetLeft-b.offsetLeft+a.offsetWidth+1+"px"}b.style.visibility="visible"},adjSrch:function(){var a=$("hdrDivTop"),c=$("advSrch"),e,b;e=c.offsetLeft+c.offsetWidth-(a.offsetLeft+a.offsetWidth);if(e!==0){b=$("snmInp");b.style.width=b.offsetWidth-e-4+"px"}},kbHnd:function(c){c=zkEvent.setTgt(c);var b=SFt;switch(c.keyCode){case 71:if(c.altKey){b.showStg()}break;case 191:if(c.altKey){TMgr.cmgr()}return;case 73:if(c.altKey){b.hrnClick()}break;case 219:if(c.altKey){b.show()}break;case 221:if(c.altKey){var a=$("snmInp");a.focus();a.select()}break;case 190:if(c.altKey){CmpC.cmp()}break;case 13:if(document.hasFocus()||document.activeElement.id=="snmInp"){if(!b.srchDlg||!b.srchDlg.isVisible()){b.simpsrc()}else{b.sbmtFm($("fmSnmInp"))}}return}}};zkEvent.add(window,"load",LMgr.setLayout,false);