# План пересборки базы данных

**Дата:** 2026-01-16
**Причина:** Миграция разделителя испортила существующие аналоги

---

## Источники данных

### 1. zknives.com (основной источник)
- Парсинг через parser.py
- Основная таблица сталей
- Аналоги из таблицы

### 2. splav-kharkov.com
- Дополнительные данные
- Проверить наличие парсера

### 3. CSV файлы (использовать все КРОМЕ указанных)

**Использовать:**
- russian_steel_grades.csv
- Аустенитные стали.csv
- Дуплексные стали.csv
- Марки ВЭМ.csv
- Мартенситные.csv
- Спец сплавы.csv
- Ферритные стали.csv

**НЕ использовать (для проверки):**
- Марки сталей.csv (для проверки zknives)
- Ножевые.csv

---

## Шаги пересборки

### Шаг 1: Очистка
```bash
rm database/steel_database.db
python database_schema.py  # Создать новую схему
```

### Шаг 2: Парсинг zknives
```bash
python parser.py
```

### Шаг 3: Импорт CSV файлов
```bash
python import_csv.py  # Или соответствующий скрипт
```

### Шаг 4: Импорт splav-kharkov (если есть)
```bash
# Проверить наличие парсера
```

### Шаг 5: Проверка
- Проверить марку #20
- Проверить Conqueror SuperClean
- Проверить количество марок

---

## Важно

**НЕ ИЗМЕНЯТЬ:**
- Разделитель аналогов остается ПРОБЕЛ
- Не применять миграцию на " | "
- Не применять asymmetric/transitive fixes

**Формат аналогов:**
```
analogues = "H11 X38CrMoV5-1 1.2343 SKD6"
```

---

## После пересборки

1. Проверить корректность аналогов
2. Закоммитить БД в git
3. Перезапустить контейнеры
