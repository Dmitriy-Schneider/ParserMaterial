# AI Search - –ü—Ä–∞–≤–∏–ª–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

## –î–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π: 2026-01-08

## –ü—Ä–æ–±–ª–µ–º–∞ (–±—ã–ª–æ)

**–†–∞–Ω—å—à–µ:** AI Search –≤–∫–ª—é—á–∞–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ª—é–±–æ–º –ø–æ–∏—Å–∫–µ –≤ Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
```python
use_ai = request.args.get('ai', 'true').lower() == 'true'  # ‚Üê default='true'!
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç "K" –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞
- Web –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—â–µ—Ç –≤ –ë–î
- –ù–µ –Ω–∞—Ö–æ–¥–∏—Ç ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç Perplexity API
- **–ü–æ—Ç–µ—Ä—è —Ç–æ–∫–µ–Ω–æ–≤** –Ω–∞ —á–∞—Å—Ç–∏—á–Ω—ã—Ö/–Ω–µ–ø–æ–ª–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö

## –†–µ—à–µ–Ω–∏–µ (—Å—Ç–∞–ª–æ)

**–§–∞–π–ª:** [app.py:37-39](app.py:37-39)

```python
# AI Search enabled ONLY for explicit request from Telegram Bot
# Web Exact Search (üîç) searches ONLY in database (exact match, no AI fallback)
use_ai = request.args.get('ai', 'false').lower() == 'true'
```

## –ü—Ä–∞–≤–∏–ª–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ AI Search

### ‚úÖ AI Search –í–ö–õ–Æ–ß–ï–ù

| –°—Ü–µ–Ω–∞—Ä–∏–π | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------|-----------|-----------|
| **Telegram –±–æ—Ç (–ª—é–±–æ–π –ø–æ–∏—Å–∫)** | `ai=true` | ‚úÖ AI Search –∞–∫—Ç–∏–≤–µ–Ω |
| **API —Å —è–≤–Ω—ã–º ai=true** | `ai=true` | ‚úÖ AI Search –∞–∫—Ç–∏–≤–µ–Ω |

### ‚ùå AI Search –í–´–ö–õ–Æ–ß–ï–ù

| –°—Ü–µ–Ω–∞—Ä–∏–π | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------|-----------|-----------|
| **Web –æ–±—ã—á–Ω—ã–π –ø–æ–∏—Å–∫** | (–Ω–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤) | ‚ùå –¢–æ–ª—å–∫–æ –ë–î, –±–µ–∑ AI |
| **Web Exact Search (üîç)** | `exact=true` | ‚ùå –¢–æ–ª—å–∫–æ –ë–î (—Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ), –±–µ–∑ AI |
| **Web —á–∞—Å—Ç–∏—á–Ω—ã–π –ø–æ–∏—Å–∫** | `grade=K` | ‚ùå –¢–æ–ª—å–∫–æ –ë–î, –±–µ–∑ AI |
| **Web —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º** | `c_min=0.4` | ‚ùå –¢–æ–ª—å–∫–æ –ë–î, –±–µ–∑ AI |
| **API –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ ai** | (–Ω–µ—Ç ai) | ‚ùå –¢–æ–ª—å–∫–æ –ë–î, –±–µ–∑ AI |

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å - –æ–±—ã—á–Ω—ã–π –ø–æ–∏—Å–∫

**–î–µ–π—Å—Ç–≤–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç "K888" –∏ –∂–¥–µ—Ç (–∞–≤—Ç–æ–ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ 1.5 —Å–µ–∫)

**–ó–∞–ø—Ä–æ—Å:**
```
GET /api/steels?grade=K888
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `ai` –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω ‚Üí default='false'
- `exact` –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω ‚Üí false
- `use_ai = false or false = false`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ò—â–µ—Ç –≤ –ë–î
- ‚ùå –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç Perplexity API
- –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤ ‚úÖ

---

### 2. Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å - Exact Search (üîç)

**–î–µ–π—Å—Ç–≤–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç "K888" –∏ –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É üîç

**–ó–∞–ø—Ä–æ—Å:**
```
GET /api/steels?grade=K888&exact=true
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `ai` –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω ‚Üí default='false'
- `exact=true` ‚Üí true
- `use_ai = false`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ò—â–µ—Ç –≤ –ë–î (exact match, WHERE grade = 'K888')
- ‚úÖ –ï—Å–ª–∏ –Ω–∞—à–µ–ª ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚ùå –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–µ–ª ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ [] (–ë–ï–ó AI)
- **–≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤:** AI –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è ‚úÖ

---

### 3. Telegram –±–æ—Ç - –ª—é–±–æ–π –ø–æ–∏—Å–∫

**–î–µ–π—Å—Ç–≤–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç "/search K888" –∏–ª–∏ "K888"

**–ó–∞–ø—Ä–æ—Å:**
```
GET /api/steels?grade=K888&ai=true
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `ai=true` ‚Üí —è–≤–Ω–æ –ø–µ—Ä–µ–¥–∞–Ω
- `exact` –Ω–µ –≤–∞–∂–µ–Ω
- `use_ai = true or false = true`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ò—â–µ—Ç –≤ –ë–î
- ‚úÖ –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–µ–ª ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç Perplexity API
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Telegram

---

### 4. Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å - —á–∞—Å—Ç–∏—á–Ω—ã–π –ø–æ–∏—Å–∫

**–î–µ–π—Å—Ç–≤–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç "K" (–Ω–∞—á–∏–Ω–∞–µ—Ç –Ω–∞–±–∏—Ä–∞—Ç—å)

**–ó–∞–ø—Ä–æ—Å:**
```
GET /api/steels?grade=K
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `ai` –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω ‚Üí default='false'
- `exact` –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω ‚Üí false
- `use_ai = false or false = false`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ò—â–µ—Ç –≤ –ë–î –≤—Å–µ –º–∞—Ä–∫–∏ —Å "K" (K888, K340, –∏ —Ç.–¥.)
- ‚ùå –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç AI (–±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ –¥–ª—è —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞)
- –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤ ‚úÖ

---

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              API Endpoint: /api/steels                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚Üì
                  [Parse Parameters]
                          ‚Üì
              grade_filter = "K888"
              exact_search = true/false
              ai_param = 'ai' parameter (default: false)
                          ‚Üì
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ  use_ai = ai_param OR    ‚îÇ
              ‚îÇ           exact_search   ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚Üì
          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
          ‚Üì                               ‚Üì
     [Search in DB]                  [Search in DB]
          ‚Üì                               ‚Üì
     Found results?                  Found results?
          ‚Üì                               ‚Üì
        Yes ‚Üí Return                    No
                                          ‚Üì
                                    use_ai = true?
                                          ‚Üì
                                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                    ‚Üì           ‚Üì
                                  Yes          No
                                    ‚Üì           ‚Üì
                              [AI Search]   Return []
                              Perplexity
                                    ‚Üì
                              Validate?
                                    ‚Üì
                              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                              ‚Üì           ‚Üì
                            Yes          No
                              ‚Üì           ‚Üì
                          Return       Return []
                          Result
```

## –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—â–µ—Ç –º–∞—Ä–∫—É –≤ Web

**–ë—ã–ª–æ (AI –≤—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–µ–Ω –≤ Web):**
```
1. –í–≤–æ–¥–∏—Ç "K" ‚Üí API call ‚Üí –ë–î: 50 –º–∞—Ä–æ–∫ —Å K ‚Üí –ù–ï –Ω–∞—à–µ–ª "K" ‚Üí Perplexity API ($0.01)
2. –í–≤–æ–¥–∏—Ç "K8" ‚Üí API call ‚Üí –ë–î: 10 –º–∞—Ä–æ–∫ ‚Üí –ù–ï –Ω–∞—à–µ–ª "K8" ‚Üí Perplexity API ($0.01)
3. –í–≤–æ–¥–∏—Ç "K88" ‚Üí API call ‚Üí –ë–î: 3 –º–∞—Ä–∫–∏ ‚Üí –ù–ï –Ω–∞—à–µ–ª "K88" ‚Üí Perplexity API ($0.01)
4. –í–≤–æ–¥–∏—Ç "K888" ‚Üí API call ‚Üí –ë–î: –Ω–∞—à–µ–ª! ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ò—Ç–æ–≥–æ: 3 –ª–∏—à–Ω–∏—Ö Perplexity –≤—ã–∑–æ–≤–∞ = $0.03 (–Ω–∞ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è!)
```

**–°—Ç–∞–ª–æ (AI –¢–û–õ–¨–ö–û –¥–ª—è Telegram –±–æ—Ç–∞):**
```
1. –í–≤–æ–¥–∏—Ç "K" ‚Üí API call ‚Üí –ë–î: 50 –º–∞—Ä–æ–∫ —Å K ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ ‚úÖ
2. –í–≤–æ–¥–∏—Ç "K8" ‚Üí API call ‚Üí –ë–î: 10 –º–∞—Ä–æ–∫ ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ ‚úÖ
3. –í–≤–æ–¥–∏—Ç "K88" ‚Üí API call ‚Üí –ë–î: 3 –º–∞—Ä–∫–∏ ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ ‚úÖ
4. –í–≤–æ–¥–∏—Ç "K888" ‚Üí API call ‚Üí –ë–î: –Ω–∞—à–µ–ª! ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚úÖ
5. –ù–∞–∂–∏–º–∞–µ—Ç üîç (Exact Search) ‚Üí –ë–î —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ ‚Üí –ï—Å–ª–∏ –Ω–∞—à–µ–ª: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–µ–ª: [] ‚úÖ

–î–ª—è –ø–æ–∏—Å–∫–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –º–∞—Ä–æ–∫ ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Telegram –±–æ—Ç:
- Telegram: "K888" ‚Üí –ë–î ‚Üí –ù–µ –Ω–∞—à–µ–ª ‚Üí Perplexity API ($0.01) ‚Üí –î–æ–±–∞–≤–∏—Ç—å –≤ –ë–î ‚úÖ

–ò—Ç–æ–≥–æ: Web –≤–æ–æ–±—â–µ –ù–ï —Ä–∞—Å—Ö–æ–¥—É–µ—Ç —Ç–æ–∫–µ–Ω—ã! AI —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç.
```

**–≠–∫–æ–Ω–æ–º–∏—è:** 100% —Ç–æ–∫–µ–Ω–æ–≤ –≤ Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ! AI —Ç–æ–ª—å–∫–æ –¥–ª—è Telegram –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Bot

Telegram Bot **–≤—Å–µ–≥–¥–∞** –ø–µ—Ä–µ–¥–∞–µ—Ç `ai=true` —è–≤–Ω–æ, –ø–æ—ç—Ç–æ–º—É –µ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ **–Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å**:

**–§–∞–π–ª:** `telegram_bot/handlers/search.py:82-86`

```python
response = requests.get(
    config.SEARCH_ENDPOINT,
    params={
        'grade': grade_name,
        'ai': 'true'  # ‚Üê –Ø–≤–Ω–æ –≤–∫–ª—é—á–∞–µ—Ç AI
    },
    timeout=60
)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Telegram –±–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AI Search –∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ ‚úÖ

## –ö–Ω–æ–ø–∫–∞ Exact Search –≤ Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

**–§–∞–π–ª:** `templates/index.html:397`

```html
<button class="btn-exact-search" onclick="searchExact()" title="Exact search">üîç</button>
```

**JavaScript:**
```javascript
function searchExact() {
    searchSteels(true);  // ‚Üê exactSearch = true
}

function searchSteels(exactSearch = false) {
    // ...
    if (exactSearch) {
        params.append('exact', 'true');  // ‚Üê –ü–µ—Ä–µ–¥–∞–µ—Ç exact=true –≤ API
    }
    // ...
}
```

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –º–∞—Ä–∫—É: "K888"
2. –ù–∞–∂–∏–º–∞–µ—Ç üîç (Exact Search)
3. API –ø–æ–ª—É—á–∞–µ—Ç `exact=true` ‚Üí `use_ai=true` ‚Üí –≤–∫–ª—é—á–∞–µ—Ç—Å—è AI Search
4. –ï—Å–ª–∏ –Ω–µ—Ç –≤ –ë–î ‚Üí –∏—â–µ—Ç —á–µ—Ä–µ–∑ Perplexity

## UX —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ (–≤ –ë–î —á–µ—Ä–µ–∑ Web)
```
–ü—Ä–æ—Å—Ç–æ –Ω–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –º–∞—Ä–∫—É ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –∫–∞–∂–¥—ã–µ 1.5 —Å–µ–∫
- –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (LIKE '%K888%')
- –ë–ï–ó AI –ø–æ–∏—Å–∫–∞
```

### –î–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ (–≤ –ë–î —á–µ—Ä–µ–∑ Web)
```
1. –í–≤–µ–¥–∏—Ç–µ –ø–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ä–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "K888")
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É üîç (Exact Search)
3. –ò—â–µ—Ç —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (WHERE grade = 'K888')
4. –ë–ï–ó AI –ø–æ–∏—Å–∫–∞
```

### –î–ª—è –ø–æ–∏—Å–∫–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–π –º–∞—Ä–∫–∏ (—Å AI —á–µ—Ä–µ–∑ Telegram)
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –±–æ—Ç–∞
2. –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ä–∫–∏ –∏–ª–∏ /search –Ω–∞–∑–≤–∞–Ω–∏–µ
3. AI –≤–∫–ª—é—á–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –°–Ω–∞—á–∞–ª–∞ –∏—â–µ—Ç –≤ –ë–î
   - –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–µ–ª ‚Üí Perplexity API
   - –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ ‚Üí –∫–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å –≤ –ë–î"
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤

–î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞ —Ç–æ–∫–µ–Ω–æ–≤ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

**–§–∞–π–ª:** `app.py` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```python
if len(results) == 0 and grade_filter and use_ai and ai_search.enabled:
    print(f"[AI SEARCH] Triggered for grade: {grade_filter}")
    print(f"  - Source: {'Telegram' if request.args.get('ai') == 'true' else 'Web Exact Search'}")
    ai_result = ai_search.search_steel(grade_filter)
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã

### –¢–µ—Å—Ç 1: Web –æ–±—ã—á–Ω—ã–π –ø–æ–∏—Å–∫ (–±–µ–∑ AI)
```bash
curl "http://localhost:5001/api/steels?grade=UnknownSteel123"
# –û–∂–∏–¥–∞–µ—Ç—Å—è: [] (–ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤, –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç AI)
```

### –¢–µ—Å—Ç 2: Web Exact Search (–ë–ï–ó AI)
```bash
curl "http://localhost:5001/api/steels?grade=K888&exact=true"
# –û–∂–∏–¥–∞–µ—Ç—Å—è: –ï—Å–ª–∏ –Ω–µ –≤ –ë–î ‚Üí –≤–µ—Ä–Ω–µ—Ç [] (–ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤, –ë–ï–ó –≤—ã–∑–æ–≤–∞ AI)
```

### –¢–µ—Å—Ç 3: Telegram –∑–∞–ø—Ä–æ—Å (—Å AI)
```bash
curl "http://localhost:5001/api/steels?grade=K888&ai=true"
# –û–∂–∏–¥–∞–µ—Ç—Å—è: –ï—Å–ª–∏ –Ω–µ –≤ –ë–î ‚Üí –≤—ã–∑–æ–≤–µ—Ç Perplexity ‚Üí –≤–µ—Ä–Ω–µ—Ç AI —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

**–§–∞–π–ª:** [app.py:37-39](app.py:37-39)

**–î–æ (–≤–µ—Ä—Å–∏—è 1):**
```python
use_ai = request.args.get('ai', 'true').lower() == 'true'  # ‚Üê AI –≤—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–µ–Ω!
```

**–ü–æ–ø—ã—Ç–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–≤–µ—Ä—Å–∏—è 2):**
```python
# –í–∫–ª—é—á–∞–ª AI –¥–ª—è Exact Search - –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!
use_ai = request.args.get('ai', 'false').lower() == 'true' or exact_search
```

**–ü–æ—Å–ª–µ (–≤–µ—Ä—Å–∏—è 3 - —Ñ–∏–Ω–∞–ª—å–Ω–∞—è):**
```python
# AI Search enabled ONLY for explicit request from Telegram Bot
# Web Exact Search (üîç) searches ONLY in database (exact match, no AI fallback)
use_ai = request.args.get('ai', 'false').lower() == 'true'
```

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ Telegram Bot: –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å)
- ‚úÖ Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: —É–ª—É—á—à–µ–Ω–∏–µ UX (—ç–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤)
- ‚úÖ API: –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (–º–æ–∂–Ω–æ —è–≤–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å `ai=true`)
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ: –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ)

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞:** AI Search –ü–û–õ–ù–û–°–¢–¨–Æ –æ—Ç–∫–ª—é—á–µ–Ω –≤ Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤:** 100% —Å–Ω–∏–∂–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–∞ —Ç–æ–∫–µ–Ω–æ–≤ –≤ Web (AI —Ç–æ–ª—å–∫–æ –≤ Telegram)

‚úÖ **Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** –¢–æ–ª—å–∫–æ –ø–æ–∏—Å–∫ –≤ –ë–î (–æ–±—ã—á–Ω—ã–π –∏ —Ç–æ—á–Ω—ã–π)

‚úÖ **Telegram –±–æ—Ç:** AI –≤–∫–ª—é—á–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–ë–î ‚Üí Perplexity –µ—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏)

‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —è–≤–Ω—ã–π `ai=true` –ø–∞—Ä–∞–º–µ—Ç—Ä

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ üîç (Exact Search)

–ö–Ω–æ–ø–∫–∞ **üîç Exact Search** –≤ Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:
- –ò—â–µ—Ç **—Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ** –≤ –ë–î (WHERE grade = '...' –≤–º–µ—Å—Ç–æ LIKE '%...%')
- **–ù–ï –≤–∫–ª—é—á–∞–µ—Ç** AI –ø–æ–∏—Å–∫
- –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è:
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "K" –¥–∞—Å—Ç K888, K340, –∏ —Ç.–¥., –∞ üîç "K" –Ω–µ –¥–∞—Å—Ç –Ω–∏—á–µ–≥–æ)
  - –ü—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–∞—Ä–∫–∏ –≤ –ë–î
  - –ë—ã—Å—Ç—Ä–æ–π —Ç–æ—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑ —á–∞—Å—Ç–∏—á–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
